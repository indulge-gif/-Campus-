<view class="container">
  <view class="header">
    <view class="banner-mask"></view>
    <view class="header-text">
      <text class="title">中央民族大学（丰台校区）</text>
      <text class="subtitle">校园导航</text>
    </view>
  </view>

  <view class="search-card" bindtap="onSearchTap">
    <view class="search-inner">
      <icon type="search" size="18" color="#c3122e"></icon>
      <input
        placeholder="搜索 教学楼 / 宿舍 / 食堂"
        value="{{searchQuery}}"
        bindinput="onSearchInput"
        bindconfirm="onSearchTap"
        bindfocus="onSearchFocus"
        placeholder-class="placeholder-style"
        confirm-type="search"
      />
    </view>
  </view>

  <view class="map-layer">
    <map
      id="map"
      longitude="{{schoolLocation.longitude}}"
      latitude="{{schoolLocation.latitude}}"
      scale="15"
      class="map-canvas"
      markers="{{markers}}"
      bindmarkertap="onMarkerTap"
      bindpoitap="onPoiTap"
      show-location="true"
      enable-scroll="false"
      enable-zoom="false"
    ></map>

    <view class="map-fab-group">
      <button class="fab" bindtap="onLocateMe">回到我的位置</button>
      <button class="fab fab-primary" bindtap="onStartNav">开始导航</button>
    </view>

    <view class="floating-nav">
      <view class="nav-item" bindtap="toAbout">
        <view class="nav-icon campus"></view>
        <text>校园概况</text>
      </view>
      <view class="nav-item" bindtap="navigateToSchool">
        <view class="nav-icon route"></view>
        <text>路线导航</text>
      </view>
      <view class="nav-item" bindtap="toLocations">
        <view class="nav-icon pin"></view>
        <text>常用地点</text>
      </view>
    </view>
  </view>

  <view class="search-suggestions" wx:if="{{suggestionsVisible}}">
    <view class="suggestions-header">
      <text class="suggestions-title">搜索结果（{{suggestions.length}}）</text>
      <text class="suggestions-close" bindtap="hideSuggestions">收起</text>
    </view>
    <view
      wx:for="{{suggestions}}"
      wx:key="id"
      class="suggestion-item"
      bindtap="onSuggestionTap"
      data-id="{{item.id}}"
    >
      <text class="suggestion-name">{{item.name}}</text>
      <text class="suggestion-sub" wx:if="{{item.sub}}">{{item.sub}}</text>
    </view>
  </view>

  <view class="poi-card {{poiCard.anim}}" wx:if="{{poiCard.visible}}">
    <view class="poi-name">{{poiCard.name}}</view>
    <view class="poi-meta">{{poiCard.distance}} · <text class="link" bindtap="onStartNav">导航</text></view>
  </view>
</view>